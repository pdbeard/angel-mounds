<div id="bg" ng-style="{ transform: 'scale3d(' + scale + ', ' + scale + ', 1)' }">
  <ul>
	<li ng-repeat="site in sites"
        ng-style="{ position: 'absolute', left: site.x + 'px', top: site.y + 'px' }">
      <div class="siteButton shadow-site-button"
           ng-class="site.layout === 'circle' ? 'circle' : 'roundedRectangle'"
           ng-style="active ? 
                     { width: site.width + 'px',
                     height: site.height + 'px',
                     left: (-site.width / 4) + 'px',
                     top: (-site.height / 4) + 'px',
                     background: site.color,
                     transition: 'all .5s cubic-bezier(0.6, -0.28, 0.735, 0.045)'} :
                     { transform: 'scale3d(2, 2, 1)',
                     width: site.width + 'px',
                     height: site.height + 'px',
                     left: (-site.width / 4) + 'px',
                     top: (-site.height / 4) + 'px',
                     background: site.color,
                     transition: 'all .25s cubic-bezier(0.175, 0.885, 0.32, 1.275)'}"
           hm-tap="active = !active;"
           hm-recognizer-options='{"preventDefault":true}'
           analytics-on="click"
           analytics-label="{{site.logo}}">
        <img class="site_img" 
             ng-src="assets/images/{{site.logo}}"
             ng-style="{ transform: 'rotate(' + site.angle + ')' };" />      
      </div>

	  <ul ng-if="active"
		  class ="items" 
          ng-style="{ opacity: 1, transition: '0.2s' }"
		  ng-controller="SitesController">
		<media-item ng-repeat="item in filteredMedia"
					hub="site"
					thing="item"
					index="$index"
					items="filteredMedia"></media-item>
	  </ul>
	</li>
  </ul>
</div>

<img src="assets/background/idle-overlay.png"
	 alt="idle"
	 ng-show="showIdleOverlay"
	 class="idleOverlay"
	 ng-click="showIdleOverlay = false;" />
